<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="CMI308">
  <resultMap class="com.yondervision.mi.dto.CMi308" id="CMi308Result">
    <result column="CONSULT_ID" jdbcType="VARCHAR" property="consultId" />
    <result column="STEP_ID" jdbcType="VARCHAR" property="stepId" />
    <result column="PARENT_ID" jdbcType="VARCHAR" property="parentId" />
    <result column="ORDER_NO" jdbcType="INTEGER" property="orderNo" />
    <result column="DETAIL" jdbcType="VARCHAR" property="detail" />
    <result column="IS_LEAF_FLG" jdbcType="CHAR" property="isLeafFlg" />
    <result column="VALIDFLAG" jdbcType="CHAR" property="validflag" />
    <result column="DATEMODIFIED" jdbcType="CHAR" property="datemodified" />
    <result column="DATECREATED" jdbcType="CHAR" property="datecreated" />
    <result column="FREEUSE1" jdbcType="VARCHAR" property="freeuse1" />
    <result column="FREEUSE2" jdbcType="VARCHAR" property="freeuse2" />
    <result column="FREEUSE3" jdbcType="CHAR" property="freeuse3" />
    <result column="FREEUSE4" jdbcType="INTEGER" property="freeuse4" />
    <result column="CONSULT_ID" select="CMI308.selectAllCMi308ByParentId" property="children" />
  </resultMap>
  
  <select id="selectAllCMi308ByStepId" parameterClass="java.lang.String" resultMap="CMi308Result">
    select CONSULT_ID, STEP_ID, PARENT_ID, ORDER_NO, DETAIL, IS_LEAF_FLG,
      VALIDFLAG, DATEMODIFIED, DATECREATED, FREEUSE1, FREEUSE2, FREEUSE3, FREEUSE4
    from MI308
    where STEP_ID = #value:VARCHAR#
    and PARENT_ID = 'src'
    and VALIDFLAG='1'
    order by ORDER_NO asc
  </select>
  <select id="selectAllCMi308ByParentId" parameterClass="java.lang.String" resultMap="CMi308Result">
    select CONSULT_ID, STEP_ID, PARENT_ID, ORDER_NO, DETAIL, IS_LEAF_FLG,
      VALIDFLAG, DATEMODIFIED, DATECREATED, FREEUSE1, FREEUSE2, FREEUSE3, FREEUSE4
    from MI308
    where PARENT_ID = #value:VARCHAR#
    and VALIDFLAG='1'
    order by ORDER_NO asc
  </select>
</sqlMap>