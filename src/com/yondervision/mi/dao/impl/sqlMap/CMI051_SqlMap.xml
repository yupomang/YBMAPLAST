<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="CMI051">
  
  <resultMap class="com.yondervision.mi.dto.Mi051" id="abatorgenerated_CMi051Result">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Sep 29 16:04:50 CST 2016.
    -->
    <result column="SERVICEID" jdbcType="VARCHAR" property="serviceid" />
    <result column="BUZTYPE" jdbcType="VARCHAR" property="buztype" />
    <result column="SERVICENAME" jdbcType="VARCHAR" property="servicename" />
    <result column="SERVICEMSG" jdbcType="VARCHAR" property="servicemsg" />
    <result column="SERVICETYPE" jdbcType="VARCHAR" property="servicetype" />
    <result column="USELEVEL" jdbcType="CHAR" property="uselevel" />
    <result column="STATUS" jdbcType="CHAR" property="status" />
    <result column="MONEYTYPE" jdbcType="CHAR" property="moneytype" />
    <result column="OPENCOUCH" jdbcType="CHAR" property="opencouch" />
    <result column="COUCHTIME" jdbcType="INTEGER" property="couchtime" />
    <result column="VALIDFLAG" jdbcType="CHAR" property="validflag" />
    <result column="DATEMODIFIED" jdbcType="CHAR" property="datemodified" />
    <result column="DATECREATED" jdbcType="CHAR" property="datecreated" />
    <result column="FREEUSE1" jdbcType="VARCHAR" property="freeuse1" />
    <result column="FREEUSE2" jdbcType="VARCHAR" property="freeuse2" />
    <result column="FREEUSE3" jdbcType="CHAR" property="freeuse3" />
    <result column="FREEUSE4" jdbcType="INTEGER" property="freeuse4" />
  </resultMap>
   <resultMap class="java.util.HashMap" id="abatorgenerated_Mi051Result_new">
    <result column="SERVICEID" jdbcType="VARCHAR" property="serviceid" />
    <result column="BUZTYPE" jdbcType="VARCHAR" property="buztype" />
    <result column="SERVICENAME" jdbcType="VARCHAR" property="servicename" />
    <result column="SERVICEMSG" jdbcType="VARCHAR" property="servicemsg" />
    <result column="SERVICETYPE" jdbcType="VARCHAR" property="servicetype" />
    <result column="USELEVEL" jdbcType="CHAR" property="uselevel" />
    <result column="STATUS" jdbcType="CHAR" property="status" />
    <result column="MONEYTYPE" jdbcType="CHAR" property="moneytype" />
    <result column="OPENCOUCH" jdbcType="CHAR" property="opencouch" />
    <result column="COUCHTIME" jdbcType="INTEGER" property="couchtime" />
    <result column="VALIDFLAG" jdbcType="CHAR" property="validflag" />
    <result column="DATEMODIFIED" jdbcType="CHAR" property="datemodified" />
    <result column="DATECREATED" jdbcType="CHAR" property="datecreated" />
    <result column="FREEUSE1" jdbcType="VARCHAR" property="freeuse1" />
    <result column="FREEUSE2" jdbcType="VARCHAR" property="freeuse2" />
    <result column="FREEUSE3" jdbcType="CHAR" property="freeuse3" />
    <result column="FREEUSE4" jdbcType="INTEGER" property="freeuse4" />
    <result column="SERVICETYPENAME" jdbcType="VARCHAR" javaType="java.lang.String"
			property="servicetypename" />
	<result column="DICID" jdbcType="VARCHAR" javaType="java.lang.String"
			property="dicid" />
	<result column="SUBSERVICETYPENAME" jdbcType="VARCHAR" javaType="java.lang.String"
			property="subservicetypename" />
	<result column="SUBDICID" jdbcType="VARCHAR" javaType="java.lang.String"
			property="subdicid" />
  </resultMap>
 <select id="abatorgenerated_selectByExampleForCenterId" parameterClass="com.yondervision.mi.dto.CMi051" resultMap="abatorgenerated_CMi051Result">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Sep 29 16:04:50 CST 2016.
    -->
    select SERVICEID, BUZTYPE, SERVICENAME, SERVICEMSG, SERVICETYPE, USELEVEL, STATUS, MONEYTYPE,
      OPENCOUCH, COUCHTIME, VALIDFLAG, DATEMODIFIED, DATECREATED, FREEUSE1, FREEUSE2, FREEUSE3,
      FREEUSE4
    from MI051 where serviceid in ( select distinct serviceid from mi053 where centerid = #centerId:VARCHAR# and validflag='1' )
    
  </select>
 
 <select id="abatorgenerated_selectByExample_new" parameterClass="com.yondervision.mi.dto.Mi051Example" resultMap="abatorgenerated_Mi051Result_new">
    select trim(t1.SERVICEID) as SERVICEID, 
    	  trim(t1.BUZTYPE) as BUZTYPE, 
    	  trim(t1.SERVICENAME) as SERVICENAME, 
    	  trim(t1.SERVICEMSG) as SERVICEMSG, 
    	  trim(t1.SERVICETYPE) as SERVICETYPE, 
    	  trim(t1.USELEVEL) as USELEVEL, 
    	  trim(t1.STATUS) as STATUS, 
    	  trim(t1.MONEYTYPE) as MONEYTYPE, 
    	  trim(t1.OPENCOUCH) as OPENCOUCH, 
    	  trim(t1.COUCHTIME) as COUCHTIME, 
    	  trim(t1.VALIDFLAG) as VALIDFLAG, 
    	  trim(t1.DATEMODIFIED) as DATEMODIFIED, 
    	  trim(t1.DATECREATED) as DATECREATED, 
	      case when t1.FREEUSE1 is null then '' else trim(t1.FREEUSE1) end as FREEUSE1, 
	      case when t1.FREEUSE2 is null then '' else trim(t1.FREEUSE2) end as FREEUSE2,  
	      case when t1.FREEUSE3 is null then '' else trim(t1.FREEUSE3) end as FREEUSE3,
	      case when t1.FREEUSE4 is null then 0 else t1.FREEUSE4 end as FREEUSE4, 
	      case when t2.ITEMVAL is null then '' else trim(t2.ITEMVAL) end as SERVICETYPENAME, 
	      case when t2.DICID is null then 0 else t2.DICID end as DICID, 
	      case when t3.DICID is null then 0 else t3.DICID end as SUBDICID, 
	      case when t3.ITEMVAL is null then '' else trim(t3.ITEMVAL) end as SUBSERVICETYPENAME 
    from
	    (select SERVICEID, BUZTYPE, SERVICENAME, SERVICEMSG, SERVICETYPE, USELEVEL, STATUS, MONEYTYPE,
	      OPENCOUCH, COUCHTIME, VALIDFLAG, DATEMODIFIED, DATECREATED, FREEUSE1, FREEUSE2, FREEUSE3,
	      FREEUSE4
	    from MI051
	    <isParameterPresent>
	      <include refid="MI051.abatorgenerated_Example_Where_Clause" />
	      <isNotNull property="orderByClause">
	        order by $orderByClause$
	      </isNotNull>
	    </isParameterPresent>
	    ) t1 
    left join MI007 t2 on t1.SERVICETYPE=t2.ITEMID and t2.UPDICID in (select DICID from mi007 where ITEMID='servicetype')
  	left join MI007 t3 on t1.FREEUSE1=t3.DICID order by t2.ITEMID asc,t3.DICID asc,t1.buztype asc
  </select>
</sqlMap>