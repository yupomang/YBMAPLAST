<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="CMI304">
  <resultMap class="com.yondervision.mi.result.WebApi20111Result" id="WebApi20111Result">
    <result column="CONDITION_GROUP_ID" jdbcType="VARCHAR" property="conditionGroupId" />
    <result column="CONSULT_ITEM_ID" jdbcType="VARCHAR" property="consultItemId" />
    <result column="CONDITION_ITEM_ID" jdbcType="VARCHAR" property="conditionItemId" />
    <result column="NO_OREDER" jdbcType="INTEGER" property="noOreder" />
    <result column="GROUP_NAME" jdbcType="VARCHAR" property="groupName" />
    <result column="VALIDFLAG" jdbcType="CHAR" property="validflag" />
    <result column="DATEMODIFIED" jdbcType="CHAR" property="datemodified" />
    <result column="DATECREATED" jdbcType="CHAR" property="datecreated" />
    <result column="FREEUSE1" jdbcType="VARCHAR" property="freeuse1" />
    <result column="FREEUSE2" jdbcType="VARCHAR" property="freeuse2" />
    <result column="FREEUSE3" jdbcType="CHAR" property="freeuse3" />
    <result column="FREEUSE4" jdbcType="INTEGER" property="freeuse4" />
    <result column="CONDITION_GROUP_ID" select="CMI304.selectMi305ByConditionGroupId" property="listMi305" />
  </resultMap>
  
  <select id="selectWebApi20111ResultByConditionItemId" parameterClass="com.yondervision.mi.dto.Mi304" resultMap="WebApi20111Result">
  	select CONDITION_GROUP_ID, CONSULT_ITEM_ID, CONDITION_ITEM_ID, NO_OREDER, GROUP_NAME, VALIDFLAG,
      DATEMODIFIED, DATECREATED, FREEUSE1, FREEUSE2, FREEUSE3, FREEUSE4
    from MI304
    where
		CONDITION_ITEM_ID = #conditionItemId:VARCHAR#
	and
		VALIDFLAG = '1'
	order by NO_OREDER asc
  </select>
  
  <select id="selectWebApi20111ResultByCenterId" parameterClass="java.lang.String" resultMap="WebApi20111Result">
  	select A.CONDITION_GROUP_ID, A.CONSULT_ITEM_ID, A.CONDITION_ITEM_ID, A.NO_OREDER, A.GROUP_NAME, A.VALIDFLAG,
      A.DATEMODIFIED, A.DATECREATED, A.FREEUSE1, A.FREEUSE2, A.FREEUSE3, A.FREEUSE4, B.ITEM_NO
    from MI304 A, MI303 B
    where
    	A.CONDITION_ITEM_ID=B.CONDITION_ITEM_ID
    and
		B.CONSULT_ITEM_ID in ( select CONSULT_ITEM_ID from MI301 where  CENTERID=#value:VARCHAR# and VALIDFLAG = '1'  )
	and
		VALIDFLAG = '1'
	order by B.ITEM_NO asc, A.NO_OREDER asc
  </select>
  
  <select id="selectWebApi20111ResultByConsultItemId" parameterClass="java.lang.String" resultMap="WebApi20111Result">
  	select  A.CONDITION_GROUP_ID, A.CONSULT_ITEM_ID, A.CONDITION_ITEM_ID, A.NO_OREDER, A.GROUP_NAME, A.VALIDFLAG,
      A.DATEMODIFIED, A.DATECREATED, A.FREEUSE1, A.FREEUSE2, A.FREEUSE3, A.FREEUSE4, B.ITEM_NO
    from MI304 A, MI303 B
    where
    	A.CONDITION_ITEM_ID=B.CONDITION_ITEM_ID
    and
		B.CONSULT_ITEM_ID = #value:VARCHAR# 
	and
		A.VALIDFLAG = '1'
	and
		B.VALIDFLAG = '1'
	order by B.ITEM_NO asc, A.NO_OREDER asc
  </select>
  
  <select id="selectMi305ByConditionGroupId" parameterClass="java.lang.String" resultMap="MI305.abatorgenerated_Mi305Result">
    select CONDITION_ID, CONSULT_ITEM_ID, CONDITION_GROUP_ID, NO_OREDER, CONDITION_DETAIL,
      VALIDFLAG, DATEMODIFIED, DATECREATED, FREEUSE1, FREEUSE2, FREEUSE3, FREEUSE4, LOGINID
    from MI305
    where CONDITION_GROUP_ID = #value:VARCHAR#
    and
		VALIDFLAG = '1'
	order by NO_OREDER asc
  </select>
</sqlMap>